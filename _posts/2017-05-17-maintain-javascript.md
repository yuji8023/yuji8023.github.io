---
layout: post
title: JavaScript的维护性
date: 2017-05-17 21:22:00
categories: blog
tags: [js]
description: 《编写可维护的JavaScript》总结
---


## 前言

这本书写的太细了，对于每个点都有详尽的示例及原因表述等。我理解一下精简记录如下

## 基本的格式化

* 缩进：一般采用4个、2个空格缩进最好，Tab制表符在不同系统的相同编辑器表现方式可能不一致（一般可在编辑器中配置）
* 语句的结尾最好要加分号，当然书中强调的是一定，因为JavaScript中的“自动分号插入”机制（ASI）不是任何情况下都是对的
* 不要书写过于长的代码（一般不超过80个字符），换行一般在运算符后换行，然后两个层级的缩进（变量赋值除外，和等号后面的代码对齐）
* 不相干的代码语句中间可以加空行，提高可读性（方法之间、方法中的局部变量跟第一条语句之间、多行或单行注释之前、方法内的多个逻辑片段之间）
* 命名遵循驼峰式大小写（Camel Case），变量名前缀应当是名词，方法名前缀应是动词
* 常量使用大写与下划线来命名（MAX_COUNT），构造函数首字母大写
* 字符串是使用单引号（''）还是双引号（""）要统一。数字不要省略小数点之前和之后的数字
* null：最后的理解是将它当做对象的占位符，对于一个可能赋值为对象的变量将其赋值为null，这样typeof返回的值是"object"，就可以跟undefined区分开了
* 对象直接量与数组直接量，即推荐使用‘{}’和‘[]’直接赋值的方式声明对象与数组。

    var colors = ["red","green","blue"]
    var book = {
        title:"可维护的JavaScript",
        author:"NIcholas C. Zakas"
    } 

## 注释

* 注释大段代码用单行注释，注释很长的文本用多行注释
* 注释也应该注意缩进，独占一行的注释之前应有空行，在代码后面的注释应与代码之间有间隔
* 代码尾部不要使用多行注释
* 使用注释的指导原则是：当代码不够清晰时添加注释，而当代码很明了时不应当添加注释。（难于理解的代码、可能被认为是错误的代码、浏览器特性Hack）
* 文档注释，可以使用JSDoc生成文档。应当对所有的方法（期望的参数及可能的返回值）、所有的构造函数（自定义类型及期望的参数）

/*
 * 多行注释 
 */*

## 语句和表达式

* 所有的块语句都应当使用花括号，应将做花括号放在块语句代码中第一句的末尾
    if (a > 0) {
        return false;
    }
* 块语句间隔风格，第二种：在左圆括号之前和右圆括号之后各添加一个空格，如上
* switch的缩进方式，case连续执行的时候应包含注释`/* fall through */`   只要是有意为之并添加了注释，就可以使用case语句的连续执行，在没有默认行为且添加注释的情况下省略default
* 强烈避免使用with
* 尽量避免使用continue，使用后JSLint会给出警告
* for-in循环是用来对实例对象和原型链中的键（key）做遍历的，而不是用来遍历包含数字索引的数组。在for-in循环中使用hasOwnProperty() ，除非你想查找原型链，这是你就应该添加注释

    for (prop in object) {
        if(onject.hasOwnProperty(prop)){
            console.log("name is " + prop)
        }
    }

## 变量、函数和运算符

* JavaScript有变量提升机制，建议总是将局部变量的定义放在函数内顶部，可用一个var声明
* 函数声明也会跟变量声明一样提升，函数使用应该在声明之后。不应该声明在条件语句内部
* 函数调用：函数名与圆括号之间不应有间隔，以区分块语句
* 为了让立即执行的函数便于区分，可以将函数用一对圆括号包裹起来
* 最好不要再全局作用域中使用"use strict"
* 布尔值与数字比较，布尔值会转换为数字，然后进行比较，false值为0、true为1。
* 强制类型转换机制，推荐使用 === 或 !== 做判断比较
* eval()函数不到万不得已不得用

